---
#------------------------------------------------------------
# Checkout repository
#------------------------------------------------------------

- name: Checkout main repository
  git:
    repo: "{{ repository_url }}"
    dest: "{{ coder_apps_work_dir }}"
    update: yes
  become: yes
  become_user: "{{ linux_user }}"

#------------------------------------------------------------
# Environment Setup
#------------------------------------------------------------

- name: generate .env file
  template:
    src: "../templates/.env.template"
    dest: "{{ coder_apps_work_dir }}/.env"
  become: yes
  become_user: "{{ linux_user }}"
